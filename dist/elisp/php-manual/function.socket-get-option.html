<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Gets socket options for the socket</title>
 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.socket-create.html">socket_create</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.socket-getpeername.html">socket_getpeername</a></div>
 <div class="up"><a href="ref.sockets.html">Socket Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.socket-get-option" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">socket_get_option</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5)</p><p class="refpurpose"><span class="refname">socket_get_option</span> &mdash; <span class="dc-title">Gets socket options for the socket </span></p>

 </div>
 
 <a name="function.socket-get-option.description"></a><div class="refsect1 description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><b>socket_get_option</b></span>
    ( <span class="methodparam"><span class="type">resource</span> <tt class="parameter">$socket</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$level</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$optname</tt></span>
   )</div>

  <p class="para rdfs-comment">
   The <b>socket_get_option()</b> function retrieves the value for
   the option specified by the <i><tt class="parameter">optname</tt></i>
 parameter for the
   specified <i><tt class="parameter">socket</tt></i>
.
  </p>
 </div>


 <a name="function.socket-get-option.parameters"></a><div class="refsect1 parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    <dt class="varlistentry">

     <span class="term"><i><tt class="parameter">socket</tt></i>
</span>

     </dt><dd class="listitem">

      <p class="para">
       A valid socket resource created with <a href="function.socket-create.html" class="function">socket_create()</a>
       or <a href="function.socket-accept.html" class="function">socket_accept()</a>.
      </p>
     </dd>

    
    <dt class="varlistentry">

     <span class="term"><i><tt class="parameter">level</tt></i>
</span>

     </dt><dd class="listitem">

      <p class="para">
       The <i><tt class="parameter">level</tt></i>
 parameter specifies the protocol
       level at which the option resides. For example, to retrieve options at
       the socket level, a <i><tt class="parameter">level</tt></i>
 parameter of
       <b><tt class="constant">SOL_SOCKET</tt></b> would be used. Other levels, such as
       <b><tt class="constant">TCP</tt></b>, can be used by
       specifying the protocol number of that level. Protocol numbers can be
       found by using the <a href="function.getprotobyname.html" class="function">getprotobyname()</a> function.
      </p>
     </dd>

    
    <dt class="varlistentry">

     <span class="term"><i><tt class="parameter">optname</tt></i>
</span>

     </dt><dd class="listitem">

      <table class="doctable table">
       <caption><b>Available Socket Options</b></caption>
       
        <thead valign="middle">
         <tr valign="middle">
          <th>Option</th>
          <th>Description</th>
          <th>Type</th>
         </tr>

        </thead>

        <tbody valign="middle" class="tbody">
         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_DEBUG</tt></b></td>
          <td align="left">
           Reports whether debugging information is being recorded.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_BROADCAST</tt></b></td>
          <td align="left">
           Reports whether transmission of broadcast messages is supported.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_REUSEADDR</tt></b></td>
          <td align="left">
           Reports whether local addresses can be reused.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_KEEPALIVE</tt></b></td>
          <td align="left">
           Reports whether connections are kept active with periodic transmission
           of messages. If the connected socket fails to respond to these messages,
           the connection is broken and processes writing to that socket are notified
           with a SIGPIPE signal.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_LINGER</tt></b></td>
          <td align="left">
           <p class="para">
            Reports whether the <i><tt class="parameter">socket</tt></i>
 lingers on 
            <a href="function.socket-close.html" class="function">socket_close()</a> if data is present. By default, 
            when the socket is closed, it attempts to send all unsent data.
            In the case of a connection-oriented socket, 
            <a href="function.socket-close.html" class="function">socket_close()</a> will wait for its peer to
            acknowledge the data. 
           </p>
           <p class="para">
            If <var class="varname">l_onoff</var> is non-zero and 
            <var class="varname">l_linger</var> is zero, all the 
            unsent data will be discarded and RST (reset) is sent to the 
            peer in the case of a connection-oriented socket. 
           </p>
           <p class="para">
            On the other hand, if <var class="varname">l_onoff</var> is 
            non-zero and <var class="varname">l_linger</var> is non-zero,
            <a href="function.socket-close.html" class="function">socket_close()</a> will block until all the data 
            is sent or the time specified in <var class="varname">l_linger</var>
            elapses. If the socket is non-blocking, 
            <a href="function.socket-close.html" class="function">socket_close()</a> will fail and return an error.
           </p>
          </td>
          <td align="left">
           <a href="language.types.array.html" class="type array">array</a>. The array will contain two keys:
           <var class="varname">l_onoff</var> and 
           <var class="varname">l_linger</var>. 
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_OOBINLINE</tt></b></td>
          <td align="left">
           Reports whether the <i><tt class="parameter">socket</tt></i>
 leaves out-of-band data inline.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_SNDBUF</tt></b></td>
          <td align="left">
           Reports the size of the send buffer.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>          
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_RCVBUF</tt></b></td>
          <td align="left">
           Reports the size of the receive buffer.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>         
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_ERROR</tt></b></td>
          <td align="left">
           Reports information about error status and clears it.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a> (cannot be set by <a href="function.socket-set-option.html" class="function">socket_set_option()</a>)
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_TYPE</tt></b></td>
          <td align="left">
           Reports the <i><tt class="parameter">socket</tt></i>
 type (e.g. 
           <b><tt class="constant">SOCK_STREAM</tt></b>).
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a> (cannot be set by <a href="function.socket-set-option.html" class="function">socket_set_option()</a>)
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_DONTROUTE</tt></b></td>
          <td align="left">
           Reports whether outgoing messages bypass the standard routing facilities.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_RCVLOWAT</tt></b></td>
          <td align="left">
           Reports the minimum number of bytes to process for <i><tt class="parameter">socket</tt></i>
 
           input operations.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_RCVTIMEO</tt></b></td>
          <td align="left">
           Reports the timeout value for input operations.
          </td>
          <td align="left">
           <a href="language.types.array.html" class="type array">array</a>. The array will contain two keys:
           <var class="varname">sec</var> which is the seconds part on the timeout
           value and <var class="varname">usec</var> which is the microsecond part 
           of the timeout value. 
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_SNDTIMEO</tt></b></td>
          <td align="left">
           Reports the timeout value specifying the amount of time that an output
           function blocks because flow control prevents data from being sent.
          </td>
          <td align="left">
           <a href="language.types.array.html" class="type array">array</a>. The array will contain two keys:
           <var class="varname">sec</var> which is the seconds part on the timeout
           value and <var class="varname">usec</var> which is the microsecond part 
           of the timeout value. 
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">SO_SNDLOWAT</tt></b></td>
          <td align="left">
           Reports the minimum number of bytes to process for <i><tt class="parameter">socket</tt></i>
 output operations.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>
         </tr>

         <tr valign="middle">
          <td align="left"><b><tt class="constant">TCP_NODELAY</tt></b></td>
          <td align="left">
           Reports whether the Nagle TCP algorithm is disabled.
          </td>
          <td align="left">
           <a href="language.types.integer.html" class="type int">int</a>
          </td>
         </tr>

        </tbody>
       
      </table>

     </dd>

    
   </dl>
<p>
  </p>
 </div>


 <a name="function.socket-get-option.returnvalues"></a><div class="refsect1 returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the value of the given option, or <b><tt class="constant">FALSE</tt></b> on errors.
  </p>
 </div>


 <a name="function.socket-get-option.examples"></a><div class="refsect1 examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example">
    <p><b>Example #1 <a href="function.socket-set-option.html" class="function">socket_set_option()</a> example</b></p>
    <div class="example-contents programlisting">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$socket&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">socket_create_listen</span><span style="color: #007700">(</span><span style="color: #0000BB">1223</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$linger&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'l_linger'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'l_onoff'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">socket_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$socket</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SOL_SOCKET</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SO_LINGER</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$linger</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">socket_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$socket</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SOL_SOCKET</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SO_REUSEADDR</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div><p>
  </p>
 </div>


 <a name="function.socket-get-option.changelog"></a><div class="refsect1 changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">4.3.0</td>
       <td align="left">
        The name of this function was changed. It used to be called
        <i>socket_getopt()</i>.
       </td>
      </tr>

     </tbody>
    
   </table>
<p>
  </p>
 </div>


</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.socket-create.html">socket_create</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.socket-getpeername.html">socket_getpeername</a></div>
 <div class="up"><a href="ref.sockets.html">Socket Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
