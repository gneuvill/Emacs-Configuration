<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Runtime Configuration</title>
 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="apc.installation.html">Installation</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="apc.resources.html">Resource Types</a></div>
 <div class="up"><a href="apc.setup.html">Installing/Configuring</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="apc.configuration" class="section">
 <h2 class="title">Runtime Configuration</h2>
 <p class="simpara">
The behaviour of these functions is affected by settings in <var class="filename">php.ini</var>.
</p>
 <p class="para">
  Although the default APC settings are fine for many installations, serious
  users should consider tuning the following parameters.
 </p>
 <p class="para">
  There are two main decisions you have to make.  First, how much shared
  memory do you want to set aside for APC, and second, whether you want APC
  to check if a file has been modified on every request.  The two ini
  directives involved here are <i>apc.shm_size</i> and 
  <i>apc.stat</i>.  Read the sections on these two directives
  carefully below.
 </p>
 <p class="para">
  Once you have a running server, you should copy the
  <i>apc.php</i> script that comes with the extension to
  somewhere in your docroot and load it up in your browser.  It provides
  you with a detailed look at what is happening in your cache.  If you
  have GD enabled in PHP, it will even have pretty graphs.  First thing
  to check is of course that it is actually caching files.  Assuming it is
  working you should then pay close attention to the <i>Cache full
  count</i> number on the left.  That tells you the number of times
  the cache has filled up and has had to forcefully clean up any entries
  not accessed within the last <i>apc.ttl</i> seconds.  You
  should configure your cache to minimize this number.  If you are constantly
  filling your cache, the resulting cache churn is going to hurt performance.
  You should either set more memory aside for APC, or use
  <i>apc.filters</i> to cache fewer scripts.
 </p>
 <p class="para">
  </p><table class="doctable table">
   <caption><b>APC configuration options</b></caption>
   
    <thead valign="middle">
     <tr valign="middle">
      <th>Name</th>
      <th>Default</th>
      <th>Changeable</th>
      <th>Changelog</th>
     </tr>

    </thead>

    <tbody valign="middle" class="tbody">
     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.enabled" class="link">apc.enabled</a></td>
      <td align="left">&quot;1&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">PHP_INI_SYSTEM in APC 2. PHP_INI_ALL in APC &lt;= 3.0.12.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.shm-segments" class="link">apc.shm_segments</a></td>
      <td align="left">&quot;1&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.shm-size" class="link">apc.shm_size</a></td>
      <td align="left">&quot;30&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.optimization" class="link">apc.optimization</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_ALL</td>
      <td align="left">PHP_INI_SYSTEM in APC 2. Removed in APC 3.0.13.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.num-files-hint" class="link">apc.num_files_hint</a></td>
      <td align="left">&quot;1000&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.user-entries-hint" class="link">apc.user_entries_hint</a></td>
      <td align="left">&quot;4096&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.0.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.ttl" class="link">apc.ttl</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.0.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.user-ttl" class="link">apc.user_ttl</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.0.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.gc-ttl" class="link">apc.gc_ttl</a></td>
      <td align="left">&quot;3600&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.cache-by-default" class="link">apc.cache_by_default</a></td>
      <td align="left">&quot;1&quot;</td>
      <td align="left">PHP_INI_ALL</td>
      <td align="left">PHP_INI_SYSTEM in APC &lt;= 3.0.12. Available since APC 3.0.0.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.filters" class="link">apc.filters</a></td>
      <td align="left">NULL</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.mmap-file-mask" class="link">apc.mmap_file_mask</a></td>
      <td align="left">NULL</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.slam-defense" class="link">apc.slam_defense</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.0.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.file-update-protection" class="link">apc.file_update_protection</a></td>
      <td align="left">&quot;2&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.6.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.enable-cli" class="link">apc.enable_cli</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.7.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.max-file-size" class="link">apc.max_file_size</a></td>
      <td align="left">&quot;1M&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.7.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.stat" class="link">apc.stat</a></td>
      <td align="left">&quot;1&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.10.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.write-lock" class="link">apc.write_lock</a></td>
      <td align="left">&quot;1&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.11.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.report-autofilter" class="link">apc.report_autofilter</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.11.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.include-once-override" class="link">apc.include_once_override</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.12.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.rfc1867" class="link">apc.rfc1867</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.13.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.rfc1867-prefix" class="link">apc.rfc1867_prefix</a></td>
      <td align="left">&quot;upload_&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.rfc1867-name" class="link">apc.rfc1867_name</a></td>
      <td align="left">&quot;APC_UPLOAD_PROGRESS&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.rfc1867-freq" class="link">apc.rfc1867_freq</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.localcache" class="link">apc.localcache</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.14.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.localcache.size" class="link">apc.localcache.size</a></td>
      <td align="left">&quot;512&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.14.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.coredump-unmap" class="link">apc.coredump_unmap</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.16.</td>
     </tr>

     <tr valign="middle">
      <td align="left"><a href="apc.configuration.html#ini.apc.stat-ctime" class="link">apc.stat_ctime</a></td>
      <td align="left">&quot;0&quot;</td>
      <td align="left">PHP_INI_SYSTEM</td>
      <td align="left">Available since APC 3.0.13.</td>
     </tr>

    </tbody>
   
  </table>
<p>
  For further details and definitions of the
PHP_INI_* modes, see the <a href="configuration.changes.modes.html" class="xref">Where a configuration setting may be set</a>.
 </p>
 
 <p class="para">Here&#039;s a short explanation of
the configuration directives.</p>
 
 <p class="para">
  </p><dl>

   <dt id="ini.apc.enabled" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.enabled</tt></i>

     <a href="language.types.boolean.html" class="type boolean">boolean</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      <i>apc.enabled</i> can be set to 0 to disable APC. This is
      primarily useful when APC is statically compiled
      into PHP, since there is no other way to disable
      it (when compiled as a DSO, the <i>extension</i>
      line in <i>php.ini</i> can just be commented-out).
     </p>
    </dd>

   
   <dt id="ini.apc.shm-segments" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.shm_segments</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      The number of shared memory segments to allocate
      for the compiler cache. If APC is running out of
      shared memory but you have already set
      <i>apc.shm_size</i> as high as your system allows, you
      can try raising this value.
     </p>
    </dd>

   
   <dt id="ini.apc.shm-size" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.shm_size</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      The size of each shared memory segment in MB.
      By default, some systems (including most BSD
      variants) have very low limits on the size of a
      shared memory segment.
     </p>
    </dd>

   
   <dt id="ini.apc.optimization" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.optimization</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      The optimization level. Zero disables the
      optimizer, and higher values use more aggressive
      optimizations. Expect very modest speed
      improvements. This is experimental.
     </p>
    </dd>

   
   <dt id="ini.apc.num-files-hint" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.num_files_hint</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      A &quot;hint&quot; about the number of distinct source files
      that will be included or requested on your web
      server. Set to zero or omit if you&#039;re not sure;
      this setting is mainly useful for sites that have
      many thousands of source files.
     </p>
    </dd>

   
   <dt id="ini.apc.user-entries-hint" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.user_entries_hint</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Just like <a href="apc.configuration.html#ini.apc.num-files-hint" class="link">apc.num_files_hint</a>,
      a &quot;hint&quot; about the number of distinct user cache variables to store.
      Set to zero or omit if not sure.
     </p>
    </dd>

   
   <dt id="ini.apc.ttl" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.ttl</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      The number of seconds a cache entry is allowed to
      idle in a slot in case this cache entry slot is
      needed by another entry.  Leaving this at zero
      means that your cache could potentially fill up
      with stale entries while newer entries won&#039;t be
      cached.  In the event of a cache running out of
      available memory, the cache will be completely
      expunged if ttl is equal to 0.  Otherwise, if the
      ttl is greater than 0, APC will attempt to remove
      expired entries.
     </p>
    </dd>

   
   <dt id="ini.apc.user-ttl" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.user_ttl</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      The number of seconds a cache entry is allowed to
      idle in a slot in case this cache entry slot is
      needed by another entry.  Leaving this at zero
      means that your cache could potentially fill up
      with stale entries while newer entries won&#039;t be
      cached.  In the event of a cache running out of
      available memory, the cache will be completely
      expunged if ttl is equal to 0.  Otherwise, if the
      ttl is greater than 0, APC will attempt to remove
      expired entries.
     </p>
    </dd>

   
   <dt id="ini.apc.gc-ttl" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.gc_ttl</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      The number of seconds that a cache entry may
      remain on the garbage-collection list. This value
      provides a fail-safe in the event that a server
      process dies while executing a cached source file;
      if that source file is modified, the memory
      allocated for the old version will not be
      reclaimed until this TTL reached. Set to zero to
      disable this feature.
     </p>
    </dd>

   
   <dt id="ini.apc.cache-by-default" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.cache_by_default</tt></i>

     <a href="language.types.boolean.html" class="type boolean">boolean</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      On by default, but can be set to off and used in
      conjunction with positive <i>apc.filters</i> so that files
      are only cached if matched by a positive filter.
     </p>
    </dd>

   
   <dt id="ini.apc.filters" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.filters</tt></i>

     <a href="language.types.string.html" class="type string">string</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      A comma-separated list of POSIX extended regular
      expressions. If any pattern matches the source
      filename, the file will not be cached. Note that
      the filename used for matching is the one passed
      to include/require, not the absolute path.  If the
      first character of the expression is a <i>+</i> then the
      expression will be additive in the sense that any
      files matched by the expression will be cached, and
      if the first character is a <i>-</i> then anything matched
      will not be cached.  The <i>-</i> case is the default, so
      it can be left off.
     </p>
    </dd>

   
   <dt id="ini.apc.mmap-file-mask" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.mmap_file_mask</tt></i>

     <a href="language.types.string.html" class="type string">string</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      If compiled with MMAP support by using <i>--enable-mmap</i>
      this is the mktemp-style file_mask to pass to the
      mmap module for determining whether your mmap&#039;ed memory
      region is going to be file-backed or shared memory
      backed.  For straight file-backed mmap, set it to
      something like <i>/tmp/apc.XXXXXX</i>
      (exactly 6 <i>X</i>s).
      To use POSIX-style shm_open/mmap put a <i>.shm</i>
      somewhere in your mask.  e.g. <i>/apc.shm.XXXXXX</i>
      You can also set it to <i>/dev/zero</i> to use your
      kernel&#039;s <i>/dev/zero</i> interface to anonymous mmap&#039;ed
      memory. Leaving it undefined will force an anonymous mmap.
     </p>
    </dd>

   
   <dt id="ini.apc.slam-defense" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.slam_defense</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      On very busy servers whenever you start the server or
      modify files you can create a race of many processes
      all trying to cache the same file at the same time.
      This option sets the percentage of processes that will
      skip trying to cache an uncached file.  Or think of it
      as the probability of a single process to skip caching.
      For example, setting <i>apc.slam_defense</i>
      to <i>75</i> would mean that there is
      a 75% chance that the process will not cache an uncached
      file. So, the higher the setting the greater the defense
      against cache slams.  Setting this to <i>0</i>
      disables this feature.
     </p>
     <p class="para">
      Deprecated by <a href="apc.configuration.html#ini.apc.write-lock" class="link">apc.write_lock</a>.
     </p>
    </dd>

   
   <dt id="ini.apc.file-update-protection" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.file_update_protection</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      When you modify a file on a live web server you really
      should do so in an atomic manner.  That is, write to a
      temporary file and rename (<i>mv</i>) the file into its
      permanent position when it is ready.  Many text editors,
      <strong class="command">cp</strong>, <strong class="command">tar</strong> and
      other such programs don&#039;t do this.  This means that there
      is a chance that a file is accessed (and cached) while it
      is still being written to.  This <i>apc.file_update_protection</i>
      setting puts a delay on caching brand new files.  The
      default is 2 seconds which means that if the modification
      timestamp (<i>mtime</i>) on a file shows that it is less than 2
      seconds old when it is accessed, it will not be cached.
      The unfortunate person who accessed this half-written file
      will still see weirdness, but at least it won&#039;t persist.
      If you are certain you always atomically update your files
      by using something like <strong class="command">rsync</strong> which does this correctly, you
      can turn this protection off by setting it to 0.  If you
      have a system that is flooded with io causing some update
      procedure to take longer than 2 seconds, you may want to
      increase this a bit.
     </p>
    </dd>

   
   <dt id="ini.apc.enable-cli" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.enable_cli</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Mostly for testing and debugging.  Setting this enables APC
      for the CLI version of PHP.  Normally you wouldn&#039;t want to
      create, populate and tear down the APC cache on every CLI
      request, but for various test scenarios it is handy to be
      able to enable APC for the CLI version of APC easily.
     </p>
    </dd>

   
   <dt id="ini.apc.max-file-size" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.max_file_size</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Prevent files larger than this value from getting cached.  Defaults to
      1M. 
     </p>
    </dd>

   
   <dt id="ini.apc.stat" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.stat</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Be careful if you change this setting.  The default is for this to be On
      which means that APC will stat (check) the script on each request to see
      if it has been modified.  If it has been modified it will recompile and
      cache the new version.  If you turn this setting off, it will not check.
      That means that in order to have changes become active you need to
      restart your web server.  On a production server where you rarely
      change the code, turning stats off can produce a significant performance
      boost.
     </p>
     <p class="para">
      For included/required files this option applies as well, but note that
      if you are using relative path includes (any path that doesn&#039;t start
      with / on Unix) APC has to check in order to uniquely identify the file.
      If you use absolute path includes APC can skip the stat and use that
      absolute path as the unique identifier for the file.
     </p>
    </dd>

   
   
   <dt id="ini.apc.write-lock" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.write_lock</tt></i>

     <a href="language.types.boolean.html" class="type boolean">boolean</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      On busy servers when you first start up the server, or when many files
      are modified, you can end up with all your processes trying to compile
      and cache the same files. With write_lock enabled, only one process at a
      time will try to compile an uncached script while the other processes
      will run uncached instead of sitting around waiting on a lock.
     </p>
    </dd>

   
   
   <dt id="ini.apc.report-autofilter" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.report_autofilter</tt></i>

     <a href="language.types.boolean.html" class="type boolean">boolean</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Logs any scripts that were automatically excluded from being cached due
      to early/late binding issues.
     </p>
    </dd>

   
   
   <dt id="ini.apc.include-once-override" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.include_once_override</tt></i>

     <a href="language.types.boolean.html" class="type boolean">boolean</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Optimize <a href="function.include-once.html" class="function">include_once()</a> and <a href="function.require-once.html" class="function">require_once()</a>
      calls and avoid the expensive system calls used.
     </p>
    </dd>

   
   
   <dt id="ini.apc.rfc1867" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.rfc1867</tt></i>

     <a href="language.types.boolean.html" class="type boolean">boolean</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      RFC1867 File Upload Progress hook handler is only available if you
      compiled APC against PHP 5.2.0 or later. When enabled, any file uploads
      which includes a field called <i>APC_UPLOAD_PROGRESS</i>
      before the file field in an upload form will cause APC to automatically
      create an upload_<em class="emphasis">key</em> user cache entry where
      <em class="emphasis">key</em> is the value of the
      <i>APC_UPLOAD_PROGRESS</i> form entry.
     </p>
     <p class="para">
      Note that the file upload tracking is not threadsafe at this point, so
      new uploads that happen while a previous one is still going will disable
      the tracking for the previous.
     </p>
     <p class="para">
      </p><div class="example">
       <p><b>Example #1 An apc.rfc1867 example</b></p>
       <div class="example-contents programlisting">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">apc_fetch</span><span style="color: #007700">(</span><span style="color: #DD0000">"upload_</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #0000BB">APC_UPLOAD_PROGRESS</span><span style="color: #007700">]</span><span style="color: #DD0000">"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

       <div class="example-contents para"><p>The above example will output
something similar to:</p></div>
       <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [total] =&gt; 1142543
    [current] =&gt; 1142543
    [rate] =&gt; 1828068.8
    [filename] =&gt; test
    [name] =&gt; file
    [temp_filename] =&gt; /tmp/php8F
    [cancel_upload] =&gt; 0
    [done] =&gt; 1
)
</pre></div>
       </div>
      </div><p>
     </p>
    </dd>

   
   
   <dt id="ini.apc.rfc1867-prefix" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.rfc1867_prefix</tt></i>

     <a href="language.types.string.html" class="type string">string</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Key prefix to use for the user cache entry generated by rfc1867 upload
      progress functionality.
     </p>
    </dd>

   

   <dt id="ini.apc.rfc1867-name" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.rfc1867_name</tt></i>

     <a href="language.types.string.html" class="type string">string</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Specify the hidden form entry name that activates APC upload progress
      and specifies the user cache key suffix.
     </p>
    </dd>

   

   <dt id="ini.apc.rfc1867-freq" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.rfc1867_freq</tt></i>

     <a href="language.types.string.html" class="type string">string</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      The frequency that updates should be made to the user cache entry for
      upload progress.  This can take the form of a percentage of the total
      file size or a size in bytes optionally suffixed with
      <i>&quot;k&quot;</i>, <i>&quot;m&quot;</i>, or <i>&quot;g&quot;</i>
      for kilobytes, megabytes, or gigabytes respectively (case insensitive).
      A setting of 0 updates as often as possible, which may cause slower
      uploads.
     </p>
    </dd>

   

   <dt id="ini.apc.localcache" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.localcache</tt></i>

     <a href="language.types.boolean.html" class="type boolean">boolean</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      This enables a lock-free local process shadow-cache which reduces lock
      contention when the cache is being written to.
     </p>
    </dd>

   

   <dt id="ini.apc.localcache.size" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.localcache.size</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      The size of the local process shadow-cache, should be set to a
      sufficiently large value, approximately half of
      <a href="apc.configuration.html#ini.apc.num-files-hint" class="link">apc.num_files_hint</a>.
     </p>
    </dd>

   

   <dt id="ini.apc.coredump-unmap" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.coredump_unmap</tt></i>

     <a href="language.types.boolean.html" class="type boolean">boolean</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Enables APC handling of signals, such as SIGSEGV, that write
      core files when signaled. When these signals are received,
      APC will attempt to unmap the shared memory segment in order
      to exclude it from the core file. This setting may improve
      system stability when fatal signals are received and a large 
      APC shared memory segment is configured.
     </p>
     <div class="warning"><b class="warning">Warning</b>
      <p class="para">
       This feature is potentially dangerous. Unmapping the shared
       memory segment in a fatal signal handler may cause undefined
       behaviour if a fatal error occurs.
      </p>
     </div>
     <blockquote><p><b class="note">Note</b>: 
      
       Although some kernels may provide a facility to ignore various
       types of shared memory when generating a core dump file, these 
       implementations may also ignore important shared memory segments
       such as the Apache scoreboard.
      <br />
     </p></blockquote>
    </dd>

   

   <dt id="ini.apc.stat-ctime" class="varlistentry">
    <span class="term">
     <i><tt class="parameter">apc.stat_ctime</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>

    </dt><dd class="listitem">

     <p class="para">
      Verification with ctime will avoid problems caused by programs such 
      as svn or rsync by making sure inodes haven&#039;t changed since the last 
      stat. APC will normally only check mtime.
     </p>
    </dd>

   
  </dl>
<p>
 </p>
</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="apc.installation.html">Installation</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="apc.resources.html">Resource Types</a></div>
 <div class="up"><a href="apc.setup.html">Installing/Configuring</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
