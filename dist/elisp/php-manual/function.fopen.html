<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Opens file or URL</title>
 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.fnmatch.html">fnmatch</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.fpassthru.html">fpassthru</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.fopen" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">fopen</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">fopen</span> &mdash; <span class="dc-title">Opens file or URL</span></p>

 </div>
 
 <a name="function.fopen.description"></a><div class="refsect1 description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> <span class="methodname"><b>fopen</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$mode</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$use_include_path</tt><span class="initializer">= false</span></span>
   [, <span class="methodparam"><span class="type">resource</span> <tt class="parameter">$context</tt></span>
  ]] )</div>

  <p class="para rdfs-comment">
   <b>fopen()</b> binds a named resource, specified by
   <i><tt class="parameter">filename</tt></i>
, to a stream. 
  </p>
 </div>


 <a name="function.fopen.parameters"></a><div class="refsect1 parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    <dt class="varlistentry">

     <span class="term"><i><tt class="parameter">filename</tt></i>
</span>

     </dt><dd class="listitem">

      <p class="para">
       If <i><tt class="parameter">filename</tt></i>
 is of the form &quot;scheme://...&quot;, it
       is assumed to be a URL and PHP will search for a protocol handler
       (also known as a wrapper) for that scheme. If no wrappers for that
       protocol are registered, PHP will emit a notice to help you track
       potential problems in your script and then continue as though
       <i><tt class="parameter">filename</tt></i>
 specifies a regular file.
      </p>
      <p class="para">
       If PHP has decided that <i><tt class="parameter">filename</tt></i>
 specifies
       a local file, then it will try to open a stream on that file.
       The file must be accessible to PHP, so you need to ensure that
       the file access permissions allow this access.
       If you have enabled <a href="ini.sect.safe-mode.html#ini.safe-mode" class="link">safe mode</a>,
       or <a href="ini.sect.safe-mode.html#ini.open-basedir" class="link">open_basedir</a> further
       restrictions may apply.
      </p>
      <p class="para">
       If PHP has decided that <i><tt class="parameter">filename</tt></i>
 specifies
       a registered protocol, and that protocol is registered as a
       network URL, PHP will check to make sure that
       <a href="filesystem.configuration.html#ini.allow-url-fopen" class="link">allow_url_fopen</a> is
       enabled. If it is switched off, PHP will emit a warning and
       the fopen call will fail.
      </p>
      <blockquote><p><b class="note">Note</b>: 
       
        The list of supported protocols can be found in <a href="wrappers.html" class="xref">List of Supported Protocols/Wrappers</a>. Some protocols (also referred to as
        <i>wrappers</i>) support <i>context</i>
        and/or <var class="filename">php.ini</var> options. Refer to the specific page for the
        protocol in use for a list of options which can be set. (e.g.
        <var class="filename">php.ini</var> value <i>user_agent</i> used by the
        <i>http</i> wrapper).
       <br />
      </p></blockquote>
      <p class="para">
       On the Windows platform, be careful to escape any backslashes
       used in the path to the file, or use forward slashes.
       </p><div class="informalexample">
        <div class="example-contents programlisting">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$handle&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"c:\\data\\info.txt"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div><p>
      </p>
     </dd>

    
    <dt class="varlistentry">

     <span class="term"><i><tt class="parameter">mode</tt></i>
</span>

     </dt><dd class="listitem">

      <p class="para">
       The <i><tt class="parameter">mode</tt></i>
 parameter specifies the type of access
       you require to the stream.  It may be any of the following:
       </p><table class="doctable table">
        <caption><b>
         A list of possible modes for <b>fopen()</b>
         using <i><tt class="parameter">mode</tt></i>

        </b></caption>
        
         <thead valign="middle">
          <tr valign="middle">
           <th><i><tt class="parameter">mode</tt></i>
</th>
           <th>Description</th>
          </tr>

         </thead>

         <tbody valign="middle" class="tbody">
          <tr valign="middle">
           <td align="left"><i>&#039;r&#039;</i></td>
           <td align="left">
            Open for reading only; place the file pointer at the
            beginning of the file.
           </td>
          </tr>

          <tr valign="middle">
           <td align="left"><i>&#039;r+&#039;</i></td>
           <td align="left">
            Open for reading and writing; place the file pointer at
            the beginning of the file.
           </td>
          </tr>

          <tr valign="middle">
           <td align="left"><i>&#039;w&#039;</i></td>
           <td align="left">
            Open for writing only; place the file pointer at the
            beginning of the file and truncate the file to zero length.
            If the file does not exist, attempt to create it.
           </td>
          </tr>

          <tr valign="middle">
           <td align="left"><i>&#039;w+&#039;</i></td>
           <td align="left">
            Open for reading and writing; place the file pointer at
            the beginning of the file and truncate the file to zero
            length.  If the file does not exist, attempt to create it.
           </td>
          </tr>

          <tr valign="middle">
           <td align="left"><i>&#039;a&#039;</i></td>
           <td align="left">
            Open for writing only; place the file pointer at the end of
            the file. If the file does not exist, attempt to create it.
           </td>
          </tr>

          <tr valign="middle">
           <td align="left"><i>&#039;a+&#039;</i></td>
           <td align="left">
            Open for reading and writing; place the file pointer at
            the end of the file. If the file does not exist, attempt to
            create it.
           </td>
          </tr>

          <tr valign="middle">
           <td align="left"><i>&#039;x&#039;</i></td>
           <td align="left">
            Create and open for writing only; place the file pointer at the
            beginning of the file.  If the file already exists, the
            <b>fopen()</b> call will fail by returning <b><tt class="constant">FALSE</tt></b> and
            generating an error of level <b><tt class="constant">E_WARNING</tt></b>.  If
            the file does not exist, attempt to create it.  This is equivalent
            to specifying <i>O_EXCL|O_CREAT</i> flags for the
            underlying <i>open(2)</i> system call. 
           </td>
          </tr>

          <tr valign="middle">
           <td align="left"><i>&#039;x+&#039;</i></td>
           <td align="left">
            Create and open for reading and writing; place the file pointer at
            the beginning of the file.  If the file already exists, the
            <b>fopen()</b> call will fail by returning <b><tt class="constant">FALSE</tt></b> and
            generating an error of level <b><tt class="constant">E_WARNING</tt></b>.  If
            the file does not exist, attempt to create it.  This is equivalent
            to specifying <i>O_EXCL|O_CREAT</i> flags for the
            underlying <i>open(2)</i> system call.
           </td>
          </tr>

         </tbody>
        
       </table>
<p>
      </p>
      <blockquote><p><b class="note">Note</b>: 
       
        Different operating system families have different line-ending
        conventions.  When you write a text file and want to insert a line
        break, you need to use the correct line-ending character(s) for your
        operating system.  Unix based systems use <i>\n</i> as the
        line ending character, Windows based systems use <i>\r\n</i>
        as the line ending characters and Macintosh based systems use
        <i>\r</i> as the line ending character.
       <br />
       
        If you use the wrong line ending characters when writing your files, you
        might find that other applications that open those files will &quot;look
        funny&quot;.
       <br />
       
        Windows offers a text-mode translation flag (<i>&#039;t&#039;</i>)
        which will transparently translate <i>\n</i> to
        <i>\r\n</i> when working with the file.  In contrast, you
        can also use <i>&#039;b&#039;</i> to force binary mode, which will not
        translate your data.  To use these flags, specify either
        <i>&#039;b&#039;</i> or <i>&#039;t&#039;</i> as the last character
        of the <i><tt class="parameter">mode</tt></i>
 parameter.
       <br />
       
        The default translation mode depends on the SAPI and version of PHP that
        you are using, so you are encouraged to always specify the appropriate
        flag for portability reasons.  You should use the <i>&#039;t&#039;</i>
        mode if you are working with plain-text files and you use
        <i>\n</i> to delimit your line endings in your script, but
        expect your files to be readable with applications such as notepad.  You
        should use the <i>&#039;b&#039;</i> in all other cases.
       <br />
       
        If you do not specify the &#039;b&#039; flag when working with binary files, you
        may experience strange problems with your data, including broken image
        files and strange problems with <i>\r\n</i> characters.
       <br />
      </p></blockquote>
      <blockquote><p><b class="note">Note</b>: 
       
        For portability, it is strongly recommended that you always
        use the &#039;b&#039; flag when opening files with <b>fopen()</b>.
       <br />
      </p></blockquote>
      <blockquote><p><b class="note">Note</b>: 
       
        Again, for portability, it is also strongly recommended that
        you re-write code that uses or relies upon the <i>&#039;t&#039;</i>
        mode so that it uses the correct line endings and
        <i>&#039;b&#039;</i> mode instead.
       <br />
      </p></blockquote>
     </dd>

    
    <dt class="varlistentry">

     <span class="term"><i><tt class="parameter">use_include_path</tt></i>
</span>

     </dt><dd class="listitem">

      <p class="para">
       The optional third <i><tt class="parameter">use_include_path</tt></i>
 parameter
       can be set to &#039;1&#039; or <b><tt class="constant">TRUE</tt></b> if you want to search for the file in the
       <a href="ini.core.html#ini.include-path" class="link">include_path</a>, too.
      </p>
     </dd>

    
    <dt class="varlistentry">

     <span class="term"><i><tt class="parameter">context</tt></i>
</span>

     </dt><dd class="listitem">

      <blockquote><p><b class="note">Note</b>: <span class="simpara">Context support was added
with PHP 5.0.0. For a description of <i>contexts</i>, refer to
<a href="ref.stream.html" class="xref">Stream Functions</a>.</span></p></blockquote>
     </dd>

    
   </dl>
<p>
  </p>
 </div>


 <a name="function.fopen.returnvalues"></a><div class="refsect1 returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a file pointer resource on success, or <b><tt class="constant">FALSE</tt></b> on error.
  </p>
 </div>


 <a name="function.fopen.errors"></a><div class="refsect1 errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   If the open fails, the function an error of level
   <b><tt class="constant">E_WARNING</tt></b> is generated.  You may use <a href="language.operators.errorcontrol.html" class="link">@</a> to suppress this
   warning.
  </p>
 </div>


 <a name="function.fopen.changelog"></a><div class="refsect1 changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">4.3.2</td>
       <td align="left">
        As of PHP 4.3.2, the default mode is set to binary for all platforms
        that distinguish between binary and text mode.  If you are having
        problems with your scripts after upgrading, try using the
        <i>&#039;t&#039;</i> flag as a workaround until you have made your
        script more portable as mentioned below
       </td>
      </tr>

      <tr valign="middle">
       <td align="left">4.3.2</td>
       <td align="left">
        The <i>&#039;x&#039;</i> and <i>&#039;x+&#039;</i> option was
        added
       </td>
      </tr>

     </tbody>
    
   </table>
<p>
  </p>
 </div>


 <a name="function.fopen.examples"></a><div class="refsect1 examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example">
    <p><b>Example #1 <b>fopen()</b> examples</b></p>
    <div class="example-contents programlisting">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$handle&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"/home/rasmus/file.txt"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$handle&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"/home/rasmus/file.gif"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"wb"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$handle&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"http://www.example.com/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$handle&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"ftp://user:password@example.com/somefile.txt"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"w"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div><p>
  </p>
 </div>


 <a name="function.fopen.notes"></a><div class="refsect1 notes">
  <h3 class="title">Notes</h3>
  <div class="warning"><b class="warning">Warning</b><p class="para">When using SSL, Microsoft IIS
will violate the protocol by closing the connection without sending a
<i>close_notify</i> indicator. PHP will report this as &quot;SSL: Fatal
Protocol Error&quot; when you reach the end of the data. To work around this, the
value of <a href="errorfunc.configuration.html#ini.error-reporting" class="link">error_reporting</a> should be
lowered to a level that does not include warnings.
PHP 4.3.7 and higher can detect buggy IIS server software when you open
the stream using the <i>https://</i> wrapper and will suppress the
warning. When using <a href="function.fsockopen.html" class="function">fsockopen()</a> to create an
<i>ssl://</i> socket, the developer is responsible for detecting
and suppressing this warning.</p></div>
  <blockquote><p><b class="note">Note</b>: <span class="simpara">When <a href="features.safe-mode.html" class="link">safe mode</a> is enabled, PHP checks whether
the directory in which the script is operating has the same UID (owner) as the
script that is being executed.</span></p></blockquote>
  <p class="para">
   If you are experiencing problems with reading and writing to files and
   you&#039;re using the server module version of PHP, remember to make sure that
   the files and directories you&#039;re using are accessible to the server
   process.
  </p>
 </div>


 <a name="function.fopen.seealso"></a><div class="refsect1 seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><a href="wrappers.html" class="xref">List of Supported Protocols/Wrappers</a></li>
    <li class="member"><a href="function.fclose.html" class="function" rel="rdfs-seeAlso">fclose()</a> - Closes an open file pointer</li>
    <li class="member"><a href="function.fgets.html" class="function" rel="rdfs-seeAlso">fgets()</a> - Gets line from file pointer</li>
    <li class="member"><a href="function.fread.html" class="function" rel="rdfs-seeAlso">fread()</a> - Binary-safe file read</li>
    <li class="member"><a href="function.fwrite.html" class="function" rel="rdfs-seeAlso">fwrite()</a> - Binary-safe file write</li>
    <li class="member"><a href="function.fsockopen.html" class="function" rel="rdfs-seeAlso">fsockopen()</a> - Open Internet or Unix domain socket connection</li>
    <li class="member"><a href="function.file.html" class="function" rel="rdfs-seeAlso">file()</a> - Reads entire file into an array</li>
    <li class="member"><a href="function.file-exists.html" class="function" rel="rdfs-seeAlso">file_exists()</a> - Checks whether a file or directory exists</li>
    <li class="member"><a href="function.is-readable.html" class="function" rel="rdfs-seeAlso">is_readable()</a> - Tells whether the filename is readable</li>
    <li class="member"><a href="function.stream-set-timeout.html" class="function" rel="rdfs-seeAlso">stream_set_timeout()</a> - Set timeout period on a stream</li>
    <li class="member"><a href="function.popen.html" class="function" rel="rdfs-seeAlso">popen()</a> - Opens process file pointer</li>
    <li class="member"><a href="function.stream-context-create.html" class="function" rel="rdfs-seeAlso">stream_context_create()</a> - Create a streams context</li>
   </ul><p>
  </p>
 </div>


</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.fnmatch.html">fnmatch</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.fpassthru.html">fpassthru</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
